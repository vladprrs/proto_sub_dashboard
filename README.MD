# 2GIS Subscription Web App

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ú–∞—Ä—à—Ä—É—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–º–∞—Ä—à—Ä—É—Ç—ã-–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
4. [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)
5. [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
6. [API –∏ –º–æ–∫–∏](#api-–∏-–º–æ–∫–∏)

---

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Frontend Stack
- **React 17+** + **TypeScript**
- **Vite** (—Å–±–æ—Ä–∫–∞ + dev-—Å–µ—Ä–≤–µ—Ä)
- **React Router 6** (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
- **Tailwind CSS** + **shadcn/ui** (Card, Button, Tabs, Accordion)
- **Context API** (—Å—Ç–µ–π—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π)

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **2GIS Web SDK** (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<MapWrapper/>`)
- **msw** (Mock Service Worker –¥–ª—è `/api/subscription` –∏ `/api/map`)
- **Y Pay** (iframe –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/src
 ‚îú‚îÄ App.tsx                    # BrowserRouter + Layout —Å Header –∏ FooterNav
 ‚îú‚îÄ routes.tsx                 # –≤—Å–µ Route-–æ–±—ä—è–≤–ª–µ–Ω–∏—è + –ª–µ–Ω–∏–≤—ã–π –∏–º–ø–æ—Ä—Ç
 ‚îú‚îÄ layouts/
 ‚îÇ   ‚îî‚îÄ SubscribeLayout.tsx    # —à–∞–ø–∫–∞ + TabBar –¥–ª—è "–í—ã–≥–æ–¥–∞"/"–ú–æ–¥—É–ª–∏" + Outlet
 ‚îú‚îÄ pages/
 ‚îÇ   ‚îú‚îÄ Dashboard.tsx          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ–π
 ‚îÇ   ‚îú‚îÄ SubscribeEntry.tsx     # –í—Ö–æ–¥ –≤ –ø–æ–¥–ø–∏—Å–∫—É (—Ç–∞–±—ã "–í—ã–≥–æ–¥–∞"/"–ú–æ–¥—É–ª–∏")
 ‚îÇ   ‚îú‚îÄ ValueProp.tsx          # –≠–∫—Ä–∞–Ω —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫–∏
 ‚îÇ   ‚îú‚îÄ ModuleSelect.tsx       # –í—ã–±–æ—Ä –º–æ–¥—É–ª–µ–π –ø–æ–¥–ø–∏—Å–∫–∏
 ‚îÇ   ‚îú‚îÄ Confirm.tsx            # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –æ–ø–ª–∞—Ç–∞
 ‚îÇ   ‚îî‚îÄ SubscriptionMgmt.tsx   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
 ‚îú‚îÄ components/
 ‚îÇ   ‚îú‚îÄ Header.tsx             # –®–∞–ø–∫–∞ —Å –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é, –ª–æ–≥–æ—Ç–∏–ø–æ–º, –ø—Ä–æ—Ñ–∏–ª–µ–º
 ‚îÇ   ‚îú‚îÄ FooterNav.tsx          # –§—É—Ç–µ—Ä-–Ω–∞–≤–∏–≥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
 ‚îÇ   ‚îú‚îÄ Card.tsx               # –ö–∞—Ä—Ç–æ—á–∫–∏ –º–æ–¥—É–ª–µ–π
 ‚îÇ   ‚îú‚îÄ Tabs.tsx               # –û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ shadcn/ui/Tabs
 ‚îÇ   ‚îú‚îÄ Accordion.tsx          # F.A.Q —Å–µ–∫—Ü–∏—è
 ‚îÇ   ‚îî‚îÄ MapWrapper.tsx         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 2GIS SDK + —Å–ª–æ–π –∫–µ—à–±—ç–∫–∞/–∫—É–ø–æ–Ω–æ–≤
 ‚îú‚îÄ context/
 ‚îÇ   ‚îî‚îÄ SubscriptionContext.tsx # –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç –ø–æ–¥–ø–∏—Å–∫–∏
 ‚îú‚îÄ api/
 ‚îÇ   ‚îî‚îÄ mocks.ts               # MSW handlers –¥–ª—è API
 ‚îî‚îÄ styles/
     ‚îî‚îÄ tailwind.css           # –°—Ç–∏–ª–∏ Tailwind
```

---

## üó∫Ô∏è –ú–∞—Ä—à—Ä—É—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –î–∏–∞–≥—Ä–∞–º–º–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
```mermaid
flowchart LR
    A["/" Dashboard] --> B["/subscribe" Entry]
    B --> C["/subscribe/value" ValueProp]
    C --> D["/subscribe/modules" ModuleSelect]
    D --> E["/subscribe/confirm" Confirm]
    A --> F["/subscription" Management]
```

### –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü

| –ü—É—Ç—å | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|----------|
| `/` | `<Dashboard />` | **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**<br/>‚Ä¢ –•–µ–¥–µ—Ä: ‚ò∞, –ª–æ–≥–æ—Ç–∏–ø 2GIS, –∞–≤–∞—Ç–∞—Ä<br/>‚Ä¢ –ö–∞—Ä—Ç–∞ –≤ —Ñ–æ–Ω–µ<br/>‚Ä¢ Overlay-–∫–∞—Ä–¥ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" —Å –∫–Ω–æ–ø–∫–æ–π |
| `/subscribe` | `<SubscribeEntry />` | **–í—Ö–æ–¥ –≤ –ø–æ–¥–ø–∏—Å–∫—É**<br/>‚Ä¢ –°—Ç–∞—Ç–∏—á–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –¥–≤—É–º—è —Ç–∞–±–∞–º–∏:<br/>  - "–í—ã–≥–æ–¥–∞" (—Ñ–æ–∫—É—Å –Ω–∞ –∫–µ—à–±—ç–∫, –∫—É–ø–æ–Ω—ã)<br/>  - "–ú–æ–¥—É–ª–∏" (–ø—Ä–µ–≤—å—é –∫–∞—Ä—Ç–æ—á–µ–∫)<br/>‚Ä¢ CTA "–û—Ñ–æ—Ä–º–∏—Ç—å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `<ValueProp />` |
| `/subscribe/value` | `<ValueProp />` | **–¶–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏**<br/>‚Ä¢ –ë–æ–ª—å—à–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–ø–∏—Å–æ–∫ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π<br/>‚Ä¢ –°—Ç–∏–∫–µ—Ä-—Ç–∞–±–±–∞—Ä –≤–Ω–∏–∑—É (Tailwind Tabs) –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É "–í—ã–≥–æ–¥–∞" –∏ "–ú–æ–¥—É–ª–∏"<br/>‚Ä¢ –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" |
| `/subscribe/modules` | `<ModuleSelect />` | **–í—ã–±–æ—Ä –º–æ–¥—É–ª–µ–π**<br/>‚Ä¢ –°–µ—Ç–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ –º–æ–¥—É–ª–µ–π (Navigation Pro, Social +, Offline +)<br/>‚Ä¢ –¢–æ–≥–≥–ª—ã –∏–ª–∏ —á–µ–∫–±–æ–∫—Å—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–µ–∫<br/>‚Ä¢ –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" |
| `/subscribe/confirm` | `<Confirm />` | **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**<br/>‚Ä¢ –ò—Ç–æ–≥–æ–≤—ã–π —Å–∫—Ä–∏–Ω —Å —Å—É–º–º–æ–π –∏ —Å–ø–∏—Å–∫–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π<br/>‚Ä¢ CTA "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"<br/>‚Ä¢ –ü—Ä–∏ –∫–ª–∏–∫–µ: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–≤–µ—Ä–ª–µ–π —Å iFrame Y Pay (–∞–Ω–∏–º–∞—Ü–∏—è "Please wait") |
| `/subscription` | `<SubscriptionMgmt />` | **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π**<br/>‚Ä¢ –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ—è –ø–æ–¥–ø–∏—Å–∫–∞": —Å—Ç–∞—Ç—É—Å ("–ê–∫—Ç–∏–≤–Ω–∞"), –¥–∞—Ç–∞ —Å–ø–∏—Å–∞–Ω–∏—è, –±–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤<br/>‚Ä¢ –ö–Ω–æ–ø–∫–∞ "–ó–∞–º–æ—Ä–æ–∑–∏—Ç—å"<br/>‚Ä¢ –°–µ–∫—Ü–∏—è "–û–ø—Ü–∏–∏" —Å —Ç–æ–≥–≥–ª–∞–º–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (Toggle UI) |

### –û–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤
- **–•–µ–¥–µ—Ä**: –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é, –ª–æ–≥–æ—Ç–∏–ø, –ø—Ä–æ—Ñ–∏–ª—å
- **–î–ª—è `/subscribe*`**: sticky TabBar –ø–æ–¥ —à–∞–ø–∫–æ–π
- **F.A.Q**: –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–æ–≤ `<Accordion />` –∏–∑ shadcn/ui

---

## üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### A. –ó–∞–ø—É—Å–∫ –ø–æ–¥–ø–∏—Å–∫–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ `/` ‚Üí –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç—É –∏ –∫–∞—Ä—Ç–æ—á–∫—É-–ø—Ä–∏–º–∞–Ω–∫—É "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
2. –ö–ª–∏–∫ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/subscribe` (Entry)
3. –°–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä—ã—Ç —Ç–∞–± "–í—ã–≥–æ–¥–∞": –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∏—Ç–∞–µ—Ç –ø—Ä–æ –∫–µ—à–±—ç–∫, –∫—É–ø–æ–Ω—ã, –æ—Ñ–ª–∞–π–Ω-—Ü–µ–Ω–Ω–æ—Å—Ç—å
4. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ç–∞–± "–ú–æ–¥—É–ª–∏" ‚Äî –∑–Ω–∞–∫–æ–º–∏—Ç—Å—è —Å –º–æ–¥—É–ª—è–º–∏
5. –ù–∞–∂–∏–º–∞–µ—Ç "–û—Ñ–æ—Ä–º–∏—Ç—å" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `/subscribe/value`
6. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —à–∞–≥–∏ `/subscribe/value` ‚Üí `/subscribe/modules` ‚Üí `/subscribe/confirm`
7. –ù–∞ —à–∞–≥–µ Confirm –∫–ª–∏–∫–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" ‚Üí –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ–≤–µ—Ä–ª–µ–π —Å –∏—Ñ—Ä–µ–π–º–æ–º Y Pay –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º "Please wait"
8. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/subscription`

### B. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
1. `/subscription`: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç—É —Å–ø–∏—Å–∞–Ω–∏—è, –±–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤
2. –Æ–∑–µ—Ä –º–æ–∂–µ—Ç:
   - –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É (–∫–Ω–æ–ø–∫–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è)
   - –ü–æ–¥–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –æ–ø—Ü–∏–π (Toggle –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–µ–∫)
   - –°–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–∫–Ω–æ–ø–∫–∞ "–ò—Å—Ç–æ—Ä–∏—è")

### C. F.A.Q
- –í–Ω–∏–∑—É `/subscribe*` —ç–∫—Ä–∞–Ω–æ–≤ –¥–æ–±–∞–≤–ª—è–µ–º –∞–∫–∫–æ—Ä–¥–µ–æ–Ω —Å —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build

# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–±–æ—Ä–∫–∏
npm run preview
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### Context API
- `SubscriptionContext.tsx` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç –¥–ª—è:
  - –í—ã–±—Ä–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
  - –°—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ö—É–∫–∏
- `useSubscription()` - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–¥–ø–∏—Å–∫–∏
- `useModules()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏
- `usePayment()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

#### –í–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `<MapWrapper />` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 2GIS SDK
- `<SubscribeLayout />` - –ª–µ–π–∞—É—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –ø–æ–¥–ø–∏—Å–∫–∏
- `<Header />` - –æ–±—â–∏–π —Ö–µ–¥–µ—Ä
- `<Accordion />` - F.A.Q —Å–µ–∫—Ü–∏—è

---

## üîå API –∏ –º–æ–∫–∏

### MSW Handlers (`/api/mocks.ts`)
- `GET /api/subscription` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–∫–∏
- `POST /api/subscription` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `PUT /api/subscription` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `GET /api/map` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç—ã
- `POST /api/payment` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

### –ú–æ–¥—É–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- **Navigation Pro** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **Social +** - —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **Offline +** - –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **2GIS Web SDK** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –∏ —Å–ª–æ–µ–≤
- **Y Pay** - –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (iframe)